<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kitchen Display System ‚Äî CULINA-SUITE</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <style>
        .kds-layout {
            display: flex;
            flex-direction: column;
            height: calc(100vh - var(--nav-height));
            overflow: hidden;
            background: var(--color-base-900);
            position: relative;
        }

        /* Animated Grid Background */
        .kds-layout::before {
            content: '';
            position: absolute;
            inset: 0;
            background-image:
                linear-gradient(rgba(0, 212, 180, 0.05) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 212, 180, 0.05) 1px, transparent 1px);
            background-size: 50px 50px;
            mask-image: radial-gradient(circle at 50% 50%, black, transparent 80%);
            z-index: 0;
            pointer-events: none;
            animation: grid-pulse 10s ease-in-out infinite;
        }

        @keyframes grid-pulse {

            0%,
            100% {
                opacity: 0.3;
                transform: scale(1);
            }

            50% {
                opacity: 0.5;
                transform: scale(1.05);
            }
        }

        .kds-toolbar {
            padding: var(--space-4) var(--space-6);
            background: rgba(13, 15, 18, 0.8);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: var(--space-6);
            z-index: 10;
        }

        .kds-toolbar__left,
        .kds-toolbar__center,
        .kds-toolbar__right {
            display: flex;
            align-items: center;
            gap: var(--space-4);
        }

        .kds-station-tabs {
            background: rgba(255, 255, 255, 0.03);
            padding: 4px;
            border-radius: var(--radius-full);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .kds-tab {
            padding: var(--space-2) var(--space-5);
            font-size: var(--text-xs);
            font-weight: 700;
            cursor: pointer;
            border-radius: var(--radius-full);
            color: var(--text-muted);
            transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
            letter-spacing: .08em;
            text-transform: uppercase;
        }

        .kds-tab.active {
            color: var(--color-primary);
            background: rgba(0, 212, 180, 0.1);
            box-shadow: 0 0 15px rgba(0, 212, 180, 0.1);
        }

        .kds-stats {
            display: flex;
            align-items: center;
            gap: var(--space-3);
        }

        .kstat {
            position: relative;
            text-align: center;
            padding: var(--space-2) var(--space-4);
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: var(--radius-lg);
            min-width: 80px;
            overflow: hidden;
        }

        /* Nexus Border for KStats */
        .kstat::before {
            content: '';
            position: absolute;
            inset: -1px;
            background: linear-gradient(90deg, transparent, var(--stat-color, var(--color-primary)), transparent);
            background-size: 200% 100%;
            animation: nexus-line 4s linear infinite;
            z-index: -1;
            opacity: 0.1;
            mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            mask-composite: exclude;
            -webkit-mask-composite: destination-out;
            padding: 1px;
        }

        @keyframes nexus-line {
            0% {
                background-position: -200% 0;
            }

            100% {
                background-position: 200% 0;
            }
        }

        .kstat__val {
            font-size: var(--text-lg);
            font-weight: 900;
            font-variant-numeric: tabular-nums;
        }

        .kstat__lbl {
            font-size: 8px;
            text-transform: uppercase;
            letter-spacing: .1em;
            color: var(--text-muted);
            margin-top: -2px;
        }

        .kds-board-container {
            flex: 1;
            display: flex;
            overflow: hidden;
            position: relative;
        }

        .kds-board {
            flex: 1;
            overflow-y: auto;
            padding: var(--space-6);
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(400px, 1fr));
            gap: var(--space-6);
            align-content: start;
            z-index: 1;
        }

        /* High-Density Card Refinements */
        .kds-card__header {
            padding: var(--space-4);
            display: grid;
            grid-template-columns: 80px 1fr 100px;
            align-items: center;
            gap: var(--space-3);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            background: rgba(255, 255, 255, 0.01);
        }

        .kds-order-info {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }

        .kds-meta-row {
            display: flex;
            align-items: center;
            gap: var(--space-2);
            font-size: 10px;
            color: var(--text-muted);
            white-space: nowrap;
        }

        /* Dual Column Items */
        .kds-items.dual-col {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--space-3);
        }

        /* Nexus Rush Pulse */
        @keyframes rush-pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(255, 71, 87, 0.4);
                border-color: rgba(255, 71, 87, 0.4);
            }

            70% {
                box-shadow: 0 0 30px 10px rgba(255, 71, 87, 0);
                border-color: rgba(255, 71, 87, 0.8);
            }

            100% {
                box-shadow: 0 0 0 0 rgba(255, 71, 87, 0);
                border-color: rgba(255, 71, 87, 0.4);
            }
        }

        .kds-card.rush {
            animation: rush-pulse 2s infinite;
            background: rgba(255, 71, 87, 0.05);
        }

        /* Status Footer */
        .kds-footer {
            padding: var(--space-2) var(--space-6);
            background: rgba(13, 15, 18, 0.9);
            border-top: 1px solid rgba(255, 255, 255, 0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 10px;
            color: var(--text-muted);
            z-index: 10;
        }

        .status-pill {
            display: flex;
            align-items: center;
            gap: var(--space-2);
        }

        .status-dot {
            width: 6px;
            height: 6px;
            background: var(--color-success);
            border-radius: 50%;
            box-shadow: 0 0 8px var(--color-success);
        }

        /* Load Gauge */
        .load-gauge {
            width: 120px;
            height: 4px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 2px;
            margin-left: var(--space-4);
            position: relative;
            overflow: hidden;
        }

        .load-gauge__fill {
            height: 100%;
            background: var(--color-primary);
            width: 0%;
            transition: width 1s ease, background 0.5s ease;
        }

        /* Performance Drawer */
        .kds-drawer {
            width: 320px;
            background: rgba(13, 15, 18, 0.4);
            backdrop-filter: blur(40px);
            -webkit-backdrop-filter: blur(40px);
            border-left: 1px solid rgba(255, 255, 255, 0.05);
            display: flex;
            flex-direction: column;
            transition: transform 0.5s cubic-bezier(0.16, 1, 0.3, 1);
            position: absolute;
            right: 0;
            top: 0;
            bottom: 0;
            z-index: 20;
            transform: translateX(100%);
        }

        .kds-drawer.open {
            transform: translateX(0);
        }

        .kds-drawer__header {
            padding: var(--space-5);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            font-weight: 800;
            font-size: var(--text-sm);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .kds-drawer__content {
            padding: var(--space-5);
            overflow-y: auto;
        }

        .kds-metric-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: var(--radius-xl);
            padding: var(--space-4);
            margin-bottom: var(--space-4);
        }

        .kds-card {
            border-radius: 40px;
            border: 1px solid rgba(255, 255, 255, 0.08);
            overflow: hidden;
            transition: all 0.5s cubic-bezier(0.16, 1, 0.3, 1);
            position: relative;
            background: rgba(255, 255, 255, 0.02);
            backdrop-filter: blur(10px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            display: flex;
            flex-direction: column;
        }

        .kds-card .kds-progress {
            height: 3px;
            background: rgba(255, 255, 255, 0.05);
        }

        .kds-card:hover {
            transform: translateY(-8px) scale(1.02);
            border-color: rgba(0, 212, 180, 0.3);
            box-shadow: 0 30px 60px -12px rgba(0, 0, 0, 0.6), 0 0 20px rgba(0, 212, 180, 0.1);
        }

        .kds-card.warning {
            border-color: rgba(245, 166, 35, 0.4);
        }

        .kds-card.critical {
            border-color: rgba(255, 71, 87, 0.4);
        }

        .kds-card.rush {
            border-color: var(--color-critical);
        }

        .kds-order-id {
            font-size: var(--text-base);
            font-weight: 900;
            letter-spacing: -.02em;
        }

        .kds-card.normal .kds-order-id {
            color: var(--text-primary);
        }

        .kds-card.warning .kds-order-id {
            color: var(--color-warning);
        }

        .kds-card.critical .kds-order-id {
            color: var(--color-critical);
        }

        .kds-card.critical .kds-order-id {
            color: var(--color-critical);
        }

        .kds-meta {
            font-size: var(--text-xs);
            color: var(--text-muted);
            margin-top: 2px;
        }

        .kds-timer {
            margin-left: auto;
            text-align: right;
        }

        .kds-elapsed {
            font-size: var(--text-2xl);
            font-weight: 900;
            font-variant-numeric: tabular-nums;
            font-family: var(--font-mono);
        }

        .kds-card.normal .kds-elapsed {
            color: var(--color-success);
        }

        .kds-card.warning .kds-elapsed {
            color: var(--color-warning);
        }

        .kds-card.critical .kds-elapsed {
            color: var(--color-critical);
        }

        .kds-status-text {
            font-size: 10px;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: .1em;
            opacity: .8;
        }

        .kds-items {
            padding: var(--space-3) var(--space-4);
            display: flex;
            flex-direction: column;
            gap: var(--space-2);
        }

        .kds-item {
            display: flex;
            align-items: center;
            gap: var(--space-3);
            padding: var(--space-2) var(--space-3);
            background: var(--surface-glass);
            border-radius: var(--radius-md);
        }

        .kds-item__qty {
            width: 28px;
            height: 28px;
            border-radius: var(--radius-sm);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: var(--text-sm);
            font-weight: 900;
            background: var(--color-base-600);
        }

        .kds-item__name {
            flex: 1;
            font-size: var(--text-sm);
            font-weight: 600;
            color: var(--text-primary);
        }

        .kds-item__mod {
            font-size: var(--text-xs);
            color: var(--color-warning);
            margin-top: 1px;
        }

        .kds-item.done .kds-item__name {
            text-decoration: line-through;
            color: var(--text-muted);
        }

        .kds-progress {
            height: 4px;
            background: var(--color-base-600);
        }

        .kds-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--color-success), var(--color-primary));
            transition: width 1s linear;
        }

        .kds-actions {
            padding: var(--space-3) var(--space-4);
            display: flex;
            gap: var(--space-2);
            border-top: 1px solid var(--border-subtle);
        }

        .kds-complete-btn {
            flex: 1;
            padding: var(--space-3);
            border-radius: var(--radius-md);
            font-size: var(--text-sm);
            font-weight: 700;
            cursor: pointer;
            border: none;
            transition: all var(--transition-fast);
        }

        .kds-card.normal .kds-complete-btn {
            background: var(--color-success-bg);
            color: var(--color-success);
            border: 1px solid rgba(34, 217, 128, .3);
        }

        .kds-card.warning .kds-complete-btn {
            background: var(--color-warning-bg);
            color: var(--color-warning);
            border: 1px solid rgba(245, 166, 35, .3);
        }

        .kds-card.critical .kds-complete-btn {
            background: var(--color-critical-bg);
            color: var(--color-critical);
            border: 1px solid rgba(255, 71, 87, .3);
        }

        .kds-complete-btn:hover {
            filter: brightness(1.3);
        }

        .new-order-flash {
            animation: bounce-in .5s ease both;
        }

        .kds-empty {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: var(--space-4);
            padding: var(--space-12);
            color: var(--text-muted);
            grid-column: 1/-1;
        }

        @media(max-width:768px) {
            .kds-board {
                grid-template-columns: 1fr;
            }

            .kds-stats {
                display: none;
            }
        }
    </style>
</head>

<body>
    <nav class="cs-nav"></nav>
    <div class="cs-page kds-layout">
        <!-- TOOLBAR -->
        <div class="kds-toolbar">
            <div class="kds-toolbar__left">
                <div class="logo" style="margin:0;font-size:var(--text-lg);">CULINA<span>-SUITE</span></div>
                <div class="live-badge" style="margin-left:var(--space-2);">KDS ACTIVE</div>
            </div>

            <div class="kds-toolbar__center">
                <div class="kds-station-tabs">
                    <div class="kds-tab active" onclick="switchStation('all',this)">All Stations</div>
                    <div class="kds-tab" onclick="switchStation('Kitchen',this)">üç≥ Kitchen</div>
                    <div class="kds-tab" onclick="switchStation('Bar',this)">üç∏ Bar</div>
                </div>
            </div>

            <div class="kds-toolbar__right">
                <div class="kds-stats">
                    <div class="kstat" style="--stat-color:var(--color-primary);">
                        <div class="kstat__val" id="statTotal" style="color:var(--color-primary);">0</div>
                        <div class="kstat__lbl">Total</div>
                    </div>
                </div>
                <!-- Kitchen Pulse Load Gauge -->
                <div class="kds-pulse-module"
                    style="display:flex;align-items:center;gap:var(--space-2);background:rgba(255,255,255,0.03);padding:var(--space-2) var(--space-3);border-radius:var(--radius-lg);border:1px solid rgba(255,255,255,0.05);">
                    <div class="kstat__lbl" style="margin:0;font-size:9px;">Pulse</div>
                    <div class="load-gauge">
                        <div class="load-gauge__fill" id="loadGaugeFill"></div>
                    </div>
                </div>
                <div id="live-clock"
                    style="font-family:var(--font-mono);font-size:var(--text-xs);color:var(--text-muted);min-width:70px;">
                </div>
                <button class="btn btn-sm btn-secondary" onclick="injectOrder()">+ Ticket</button>
                <button class="btn btn-sm btn-ghost" onclick="toggleDrawer()">üìä Efficiency</button>
            </div>
        </div>

        <!-- MAIN VIEW -->
        <div class="kds-board-container">
            <div class="kds-board" id="kdsBoard"></div>

            <!-- PERFORMANCE DRAWER -->
            <div class="kds-drawer" id="kdsDrawer">
                <div class="kds-drawer__header">
                    <span>Performance Metrics</span>
                    <button class="btn btn-sm btn-ghost" onclick="toggleDrawer()">‚úï</button>
                </div>
                <div class="kds-drawer__content">
                    <div class="kds-metric-card">
                        <div class="kstat__lbl">Avg. Prep Time</div>
                        <div class="kstat__val" style="color:var(--color-primary);" id="avgPrep">12.4m</div>
                    </div>
                    <div class="kds-metric-card">
                        <div class="kstat__lbl">Station Load</div>
                        <div class="kstat__val" style="color:var(--color-warning);" id="stationLoad">84%</div>
                    </div>
                    <div class="kds-metric-card">
                        <div class="kstat__lbl">Completed Today</div>
                        <div class="kstat__val" style="color:var(--color-success);" id="completedToday">142</div>
                    </div>

                    <div style="margin-top:var(--space-8);">
                        <div class="kstat__lbl" style="margin-bottom:var(--space-4);">Recent History</div>
                        <div id="kdsHistory" style="display:flex;flex-direction:column;gap:var(--space-2);">
                            <!-- History items injected here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- STATUS FOOTER -->
        <footer class="kds-footer">
            <div class="status-pill">
                <div class="status-dot"></div>
                <span style="letter-spacing:0.05em;">PLATFORM CONNECTED ‚Äî REGION: US-EAST-1</span>
            </div>
            <div style="display:flex;gap:var(--space-6);letter-spacing:0.05em;">
                <span>LATENCY: 24ms</span>
                <span>WS SYNC: ACTIVE</span>
                <span>SECURE SESSION: KDS-041</span>
            </div>
        </footer>
    </div>
    <script src="js/script.js"></script>
    <script>
        const names = ['Marco', 'Sofia', 'Leo', 'Elena', 'Julian'];
        const getWaiter = () => names[Math.floor(Math.random() * names.length)];
        const getRelTime = () => {
            const now = new Date();
            now.setMinutes(now.getMinutes() - Math.floor(Math.random() * 20));
            return now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
        };

        let orders = [...CS.kdsOrders.map(o => ({
            ...o,
            waiter: getWaiter(),
            orderTime: getRelTime(),
            items: o.items.map(i => ({ ...i, done: false })),
            startedAt: Date.now() - o.elapsed * 60000
        }))];
        let history = [];
        let curStation = 'all';

        const ICON_MAP = {
            'Pizza': 'üçï', 'Risotto': 'üç≤', 'Pasta': 'üçù', 'Salad': 'ü•ó', 'Burrata': 'üßÄ',
            'Piccata': 'üçó', 'Salmon': 'üêü', 'Martini': 'üç∏', 'Burger': 'üçî', 'Steak': 'ü•©'
        };

        function getIcon(name) {
            for (const key in ICON_MAP) { if (name.includes(key)) return ICON_MAP[key]; }
            return 'üçΩÔ∏è';
        }

        function toggleDrawer() {
            const drawer = document.getElementById('kdsDrawer');
            drawer.classList.toggle('open');
        }

        function getPriority(elapsed) {
            if (elapsed >= 20) return 'critical';
            if (elapsed >= 12) return 'warning';
            return 'normal';
        }

        function getStatusText(p) {
            if (p === 'critical') return 'CRITICAL ‚Äî ESCALATED';
            if (p === 'warning') return 'DELAYED';
            return 'PREPARING';
        }

        function buildCard(order, idx) {
            const elapsed = order.elapsed;
            const priority = getPriority(elapsed);
            const isRush = elapsed >= 15;
            const progress = Math.min((elapsed / 25) * 100, 100);
            const typeBadge = order.type === 'Delivery' ? 'badge-critical' : order.type === 'Takeaway' ? 'badge-warning' : 'badge-neutral';

            const card = document.createElement('div');
            card.className = `kds-card ${priority} ${isRush ? 'rush' : ''} kds-order new-order-flash`;
            card.dataset.id = order.id;
            card.dataset.elapsed = elapsed;
            card.dataset.station = order.station;

            const isLarge = order.items.length > 3;

            card.innerHTML = `
                <div class="kds-card__header">
                  <div class="kds-order-id" style="font-size:18px;">${order.id}</div>
                  <div class="kds-order-info">
                    <div class="kds-meta-row" style="color:var(--text-primary);font-weight:700;">
                        <span>Table ${order.table}</span>
                        <span class="badge ${typeBadge}">${order.type}</span>
                    </div>
                    <div class="kds-meta-row">
                        <span>üë§ ${order.waiter}</span>
                        <span>‚Ä¢</span>
                        <span>üïí ${order.orderTime}</span>
                        <span>‚Ä¢</span>
                        <span>${order.station}</span>
                    </div>
                  </div>
                  <div class="kds-timer">
                    <div class="kds-elapsed" style="font-size:20px;">${elapsed}m</div>
                    <div class="kds-status-text" style="font-size:8px;">${getStatusText(priority)}</div>
                  </div>
                </div>
                <div class="kds-progress"><div class="kds-progress-fill" style="width:${progress}%;"></div></div>
                <div class="kds-items ${isLarge ? 'dual-col' : ''}" style="padding:16px;">
                  ${order.items.map((item, i) => `
                    <div class="kds-item ${item.done ? 'done' : ''}" onclick="toggleItem('${order.id}',${i})">
                      <div class="kds-item__qty">${item.qty}</div>
                      <div style="flex:1;">
                        <div class="kds-item__name">${getIcon(item.name)} ${item.name}</div>
                        ${item.mods ? `<div class="kds-item__mod">‚öë ${item.mods}</div>` : ''}
                      </div>
                      ${item.done ? '<span style="color:var(--color-success);font-size:16px;">‚úì</span>' : ''}
                    </div>`).join('')}
                </div>
                <div class="kds-actions">
                  <button class="btn btn-sm btn-ghost" onclick="bumpOrder('${order.id}')" style="font-size:11px;">‚è≠ BUMP</button>
                  <button class="kds-complete-btn" onclick="completeOrder('${order.id}')" style="font-size:11px;">COMPLETE TICKET</button>
                </div>`;
            return card;
        }

        function renderBoard() {
            const board = document.getElementById('kdsBoard');
            board.innerHTML = '';
            const filtered = curStation === 'all' ? orders : orders.filter(o => o.station === curStation);
            if (!filtered.length) {
                board.innerHTML = '<div class="kds-empty"><div style="font-size:64px;opacity:.2;">üçΩÔ∏è</div><div style="font-size:var(--text-lg);font-weight:700;">No active orders</div><div style="font-size:var(--text-sm);">Ready for the next rush</div></div>';
                return;
            }
            const sorted = [...filtered].sort((a, b) => b.elapsed - a.elapsed);
            sorted.forEach((o, i) => {
                const card = buildCard(o, i);
                card.style.animationDelay = i * 0.05 + 's';
                board.appendChild(card);
            });
            updateStats();
        }

        function updateStats() {
            let normal = 0, warn = 0, crit = 0;
            orders.forEach(o => { const p = getPriority(o.elapsed); if (p === 'normal') normal++; else if (p === 'warning') warn++; else crit++; });
            document.getElementById('statTotal').textContent = orders.length;

            // Calc efficiency
            const totalDone = history.length || 1;
            const avg = (history.reduce((acc, o) => acc + o.elapsed, 0) / totalDone).toFixed(1);

            const loadPerc = Math.min(orders.length * 15, 100);

            document.getElementById('avgPrep').textContent = avg + 'm';
            document.getElementById('completedToday').textContent = history.length;
            document.getElementById('stationLoad').textContent = loadPerc + '%';

            const gauge = document.getElementById('loadGaugeFill');
            if (gauge) {
                gauge.style.width = loadPerc + '%';
                gauge.style.background = loadPerc > 75 ? 'var(--color-critical)' : loadPerc > 40 ? 'var(--color-warning)' : 'var(--color-primary)';
            }
        }

        function switchStation(s, el) {
            document.querySelectorAll('.kds-tab').forEach(t => t.classList.remove('active'));
            el.classList.add('active');
            curStation = s;
            renderBoard();
        }

        function toggleItem(orderId, itemIdx) {
            const order = orders.find(o => o.id === orderId);
            if (!order) return;
            order.items[itemIdx].done = !order.items[itemIdx].done;
            renderBoard();
        }

        function completeOrder(id) {
            const idx = orders.findIndex(o => o.id === id);
            if (idx < 0) return;
            const order = orders[idx];
            const card = document.querySelector(`[data-id="${id}"]`);
            if (card) {
                card.style.transition = 'all .4s cubic-bezier(0.16, 1, 0.3, 1)';
                card.style.opacity = '0';
                card.style.transform = 'scale(.9) translateY(-20px)';
                setTimeout(() => {
                    history.unshift(order);
                    orders.splice(idx, 1);
                    renderBoard();
                    updateHistoryUI();
                    showToast(`${id} sent to delivery`, 'success');
                }, 400);
            }
        }

        function updateHistoryUI() {
            const histEl = document.getElementById('kdsHistory');
            histEl.innerHTML = history.slice(0, 5).map(h => `
                <div style="background:rgba(255,255,255,0.03);padding:10px;border-radius:12px;display:flex;justify-content:space-between;align-items:center;font-size:var(--text-xs);">
                    <span style="font-weight:700;color:var(--text-primary);">${h.id}</span>
                    <span style="color:var(--color-success);">${h.elapsed}m</span>
                </div>
            `).join('');
        }

        function bumpOrder(id) {
            showToast(`${id} bumped to top of queue`, 'info');
        }

        function injectOrder() {
            const types = ['Dine-In', 'Takeaway', 'Delivery'];
            const id = `ORD-${Math.floor(Math.random() * 9000) + 1000}`;
            const items = [{ name: 'Chef Special Pizza', qty: 1 }, { name: 'Iced Passion Fruit', qty: 2 }, { name: 'Garlic Bread', qty: 1 }, { name: 'Coke', qty: 1 }];
            orders.unshift({
                id,
                table: `T0${1 + Math.floor(Math.random() * 9)}`,
                type: types[Math.floor(Math.random() * 3)],
                items,
                station: 'Kitchen',
                elapsed: 0,
                waiter: names[Math.floor(Math.random() * names.length)],
                orderTime: new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })
            });
            renderBoard();
        }

        // Clock
        function updateClock() {
            const now = new Date();
            const time = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false });
            const clockEl = document.getElementById('live-clock');
            if (clockEl) clockEl.textContent = time;
        }
        setInterval(updateClock, 1000);
        updateClock();

        // Tick every 30 seconds
        setInterval(() => {
            orders.forEach(o => { o.elapsed++; });
            renderBoard();
        }, 30000);

        renderBoard();
    </script>
</body>

</html>